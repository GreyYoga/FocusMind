<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1d1a3f">
    <title>–õ–∏—á–Ω—ã–π –°–µ–∫—Ä–µ—Ç–∞—Ä—å PWA</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
</head>

<body>

    <div class="container">

        <div id="inbox-screen" class="screen">
            <div class="screen-header">
                <h2>üóÉÔ∏è –ò–Ω–±–æ–∫—Å (–ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ)</h2>
            </div>
            <div class="screen-content">
                <form id="add-task-form-inbox">
                    <input type="text" id="new-task-input" placeholder="–°–æ–±—Ä–∞—Ç—å... –ü–æ–∑–≤–æ–Ω–∏—Ç—å... –ù–∞–ø–∏—Å–∞—Ç—å..." required>
                    <button type="submit">+</button>
                </form>
                <h3>–ó–∞–¥–∞—á–∏ –±–µ–∑ –¥–∞—Ç—ã:</h3>
                <ul id="inbox-list" class="task-list-container"></ul>
            </div>
        </div>

        <div id="plan-screen" class="screen">
            <div class="screen-header">
                <h2>üìã –ü–ª–∞–Ω (–ó–∞–¥–∞—á–∏ —Å –¥–∞—Ç–æ–π)</h2>
            </div>
            <div class="screen-content">
                <h3>–ó–∞–¥–∞—á–∏ —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –¥–∞—Ç–æ–π:</h3>
                <ul id="plan-list" class="task-list-container"></ul>
            </div>
        </div>

        <div id="calendar-screen" class="screen">
            <div class="screen-header">
                <h2>üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å</h2>
            </div>
            <div class="screen-content">
                <div id="calendar-header">
                    <button id="prev-month-btn" class="secondary-btn">&lt;</button>
                    <h3 id="month-year-title">–ù–æ—è–±—Ä—å 2025</h3>
                    <button id="next-month-btn" class="secondary-btn">&gt;</button>
                </div>
                <div id="calendar-grid-header" class="calendar-grid">
                    <div class="calendar-day-name">–ü–Ω</div>
                    <div class="calendar-day-name">–í—Ç</div>
                    <div class="calendar-day-name">–°—Ä</div>
                    <div class="calendar-day-name">–ß—Ç</div>
                    <div class="calendar-day-name">–ü—Ç</div>
                    <div class="calendar-day-name">–°–±</div>
                    <div class="calendar-day-name">–í—Å</div>
                </div>
                <div id="calendar-grid" class="calendar-grid"></div>

                <h3 id="calendar-list-title">–ó–∞–¥–∞—á–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è:</h3>
                <ul id="calendar-task-list" class="task-list-container"></ul>
            </div>
        </div>

        <div id="wizard-screen" class="screen">
            <div class="screen-header">
                <h2>‚ú® –û—á–∏—Å—Ç–∫–∞ –ú–æ–∑–≥–∞</h2>
            </div>
            <div class="screen-content">
                <div id="wizard-header">
                    <h2 id="category-title">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</h2>
                    <p id="subcategory-title">–ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è</p>
                </div>
                <div class="triggers">
                    <p>–¢—Ä–∏–≥–≥–µ—Ä—ã:</p>
                    <ul id="triggers-list"></ul>
                </div>
                <h3>–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É –ø–æ —ç—Ç–æ–π —Ç–µ–º–µ:</h3>
                <form id="wizard-task-form">
                    <input type="text" id="wizard-task-input" placeholder="–ü—Ä–æ—á–∏—Ç–∞—Ç—å... –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å..." required>
                    <input type="datetime-local" id="wizard-task-datetime">
                    <button type="submit">–î–æ–±–∞–≤–∏—Ç—å</button>
                </form>
                <ul id="wizard-step-tasks"></ul>
                <div class="navigation">
                    <button id="prev-btn" class="secondary-btn">–ù–∞–∑–∞–¥</button>
                    <span id="step-counter">–®–∞–≥ 1 / N</span>
                    <button id="next-btn">–î–∞–ª–µ–µ</button>
                </div>
            </div>
        </div>

        <div id="focus-screen" class="screen">
            <div class="screen-header">
                <h2>‚è±Ô∏è –§–æ–∫—É—Å (Pomodoro)</h2>
            </div>
            <div class="screen-content">
                <div id="timer-container">
                    <div id="timer-mode-buttons">
                        <button id="timer-btn-pomodoro" class="timer-mode-btn active">–§–æ–∫—É—Å (25)</button>
                        <button id="timer-btn-short-break" class="timer-mode-btn">–ü–∞—É–∑–∞ (5)</button>
                        <button id="timer-btn-long-break" class="timer-mode-btn">–ü–µ—Ä–µ—Ä—ã–≤ (15)</button>
                    </div>
                    <div id="timer-display">25:00</div>
                    <div id="timer-controls">
                        <button id="timer-start-pause">–°—Ç–∞—Ä—Ç</button>
                        <button id="timer-reset" class="secondary-btn">–°–±—Ä–æ—Å</button>
                    </div>
                </div>
                <div id="focus-task-container">
                    <h3>–¢–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞:</h3>
                    <div id="focus-task-display">
                        <p>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–∞–¥–∞—á—É –∏–∑ —Å–ø–∏—Å–∫–∞, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å –µ–µ.</p>
                    </div>
                    <h3>–ó–∞–¥–∞—á–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è:</h3>
                    <ul id="focus-list" class="task-list-container"></ul>
                </div>
                <button id="test-notif-btn" style="margin-top:20px; background:#444;">üîî –¢–µ—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</button>
            </div>
        </div>

    </div>

    <nav class="footer-nav">
        <button id="nav-inbox" class="nav-btn active">
            <span class="icon">üóÉÔ∏è</span>
            <span>–ò–Ω–±–æ–∫—Å</span>
        </button>
        <button id="nav-plan" class="nav-btn">
            <span class="icon">üìã</span>
            <span>–ü–ª–∞–Ω</span>
        </button>
        <button id="nav-calendar" class="nav-btn">
            <span class="icon">üìÖ</span>
            <span>–ö–∞–ª–µ–Ω–¥–∞—Ä—å</span>
        </button>
        <button id="nav-wizard" class="nav-btn">
            <span class="icon">‚ú®</span>
            <span>–¢—Ä–∏–≥–≥–µ—Ä—ã</span>
        </button>
        <button id="nav-focus" class="nav-btn">
            <span class="icon">‚è±Ô∏è</span>
            <span>–§–æ–∫—É—Å</span>
        </button>
    </nav>

    <audio id="alarm-sound" src="alarm.mp3" preload="auto"></audio>

    <script src="app.js"></script>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(reg => {
                        console.log('SW –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω:', reg);
                        // –ï—Å–ª–∏ —ç—Ç–æ –ø–µ—Ä–≤–æ–µ –ø–æ—Å–µ—â–µ–Ω–∏–µ, SW –º–æ–∂–µ—Ç –±—ã—Ç—å –µ—â–µ "installing"
                        // –ù–æ –±–ª–∞–≥–æ–¥–∞—Ä—è clients.claim() –≤ sw.js –æ–Ω —Å–∫–æ—Ä–æ —Å—Ç–∞–Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–º
                    })
                    .catch(err => {
                        // –í–´–í–û–î–ò–ú –û–®–ò–ë–ö–£ –ù–ê –≠–ö–†–ê–ù –¢–ï–õ–ï–§–û–ù–ê
                        alert('‚ùå –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ SW: ' + err);
                        console.log('–û—à–∏–±–∫–∞ SW:', err);
                    });
            });
        } else {
            alert('‚ùå –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Service Workers!');
        }
    </script>
</body>

</html>